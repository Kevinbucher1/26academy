---
layout: base.njk
title: "Catalogue des formations - 26 Academy"
permalink: /catalogue/
---

{# On ajoute le CSS sp√©cifique √† cette page dans le <head> #}
{% set head %}
  <link rel="stylesheet" href="/assets/css/catalogue.css">
{% endset %}

<main>
    <section class="relative py-32 px-4 text-center overflow-hidden">
        <div class="absolute inset-0" style="background: linear-gradient(135deg, #6644FF 0%, #8B5CF6 30%, #A78BFA 60%, #C4B5FD 80%, #E9D5FF 90%, #F9FAFB 100%)"></div>
        <div class="relative z-10 max-w-4xl mx-auto pt-8">
            <h1 class="text-3xl md:text-5xl font-bold text-white mb-6">
                Trouvez la formation faite pour vous
            </h1>
        </div>
    </section>

    <div class="max-w-7xl mx-auto px-4 py-8">
        <div class="flex flex-col lg:flex-row gap-8">
            
            <div class="desktop-hidden flex gap-4 mb-4">
                <div class="relative flex-1" style="flex-basis: 60%;">
                    <i data-lucide="search" class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 h-5 w-5"></i>
                    <input type="text" id="mobile-search" placeholder="Mot cl√© : Comptable, d√©veloppeur" class="input pl-12 py-3 text-sm lg:text-lg w-full border-gray-300 rounded-md"/>
                </div>
                <div style="flex-basis: 40%;">
                    <button id="mobile-filter-toggle" class="btn btn-outline w-full h-full border-gray-300 rounded-md">
                        <i data-lucide="filter" class="h-4 w-4 mr-2"></i>
                        Filtres
                        <span id="mobile-filter-count" class="badge badge-secondary ml-2 bg-gray-200 hidden">0</span>
                    </button>
                </div>
            </div>

            <aside id="filter-sidebar" class="lg:w-80 space-y-6 mobile-hidden">
                <div class="desktop-hidden flex justify-between items-center mb-4" id="mobile-filter-header" style="display: none;">
                    <h2 class="text-lg font-semibold">Filtres</h2>
                    <button id="close-mobile-filters" class="btn btn-ghost p-2">
                        <i data-lucide="x" class="h-5 w-5"></i>
                    </button>
                </div>
                <div class="sticky-top space-y-6">
                    <div class="mobile-hidden relative">
                        <i data-lucide="search" class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 h-5 w-5"></i>
                        <input type="text" id="desktop-search" placeholder="Mot cl√© : Comptable, d√©veloppeur" class="input pl-12 py-3 text-lg w-full border-gray-300 rounded-md"/>
                    </div>
                    <div class="card p-6 border border-gray-200 rounded-lg">
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex items-center gap-2">
                                <i data-lucide="filter" class="h-5 w-5"></i>
                                <h2 class="text-lg font-semibold">Filtrer</h2>
                                <span id="filter-count" class="badge badge-secondary ml-2 bg-gray-200 hidden">0</span>
                            </div>
                            <button id="clear-filters" class="btn btn-ghost text-red-500 hover:text-red-700 hidden text-sm">
                                Effacer
                            </button>
                        </div>
                        <div id="filter-categories" class="space-y-4">
                            </div>
                    </div>
                </div>
            </aside>

            <main class="flex-1">
                <div class="mb-6 flex justify-between items-center">
                    <p id="results-count" class="text-gray-600">
                        {{ parcours.length }} formation{% if parcours.length > 1 %}s{% endif %}
                    </p>
                </div>
                <div id="formations-grid" class="grid gap-6 grid-cols-1 md:grid-cols-2">
                    {# La boucle est vide ici, car le JavaScript va la remplir #}
                </div>
                <div id="no-results" class="text-center py-12 hidden">
                    <div class="max-w-md mx-auto">
                        <div class="text-6xl mb-4">üîç</div>
                        <h3 class="text-xl font-semibold mb-2">Aucune formation trouv√©e</h3>
                        <p class="text-gray-500 mb-4">
                            Essayez de modifier vos crit√®res de recherche ou supprimez certains filtres.
                        </p>
                        <button id="clear-filters-no-results" class="btn btn-outline border-gray-300 rounded-md">
                            Effacer tous les filtres
                        </button>
                    </div>
                </div>
            </main>
        </div>
    </div>
</main>

<script>
    const allFormations = [
    {% for p in parcours %}
    {
        "id": "{{ p._id }}",
        "titre": {{ p.titre | dump | safe }},
        "slug": { "current": "{{ p.slug.current }}" },
        "imageHero": "{{ p.imageHero | sanityImageUrl }}",
        "category": "{{ p.category.title }}",
        "typeFormation": "{{ p.typeFormation }}",
        "financementsPossibles": {{ p.financementsPossibles | dump | safe or "[]" }},
        "certification": "{{ p.certification.title }}",
        "partenaire": "{{ p.partenaire.title }}",
        "eligibleCPF": {{ p.eligibleCPF or false }},
        "duree": {
            "heures": {{ p.duree.heures or 0 }},
            "mois": {{ p.duree.mois or 0 }}
        }
    },
    {% endfor %}
    ];
</script>
<script src="/assets/js/catalogue-filters.js" defer></script>