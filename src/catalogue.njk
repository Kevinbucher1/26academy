---
layout: base.njk
title: "Catalogue des formations - 26 Academy"
permalink: /catalogue/
---

{# On ajoute le CSS spécifique à cette page dans le <head> #}
{% set head %}
  <link rel="stylesheet" href="/assets/css/catalogue.css">
{% endset %}

<main>
    <section class="relative py-32 px-4 text-center overflow-hidden">
        <div class="absolute inset-0" style="background: linear-gradient(135deg, #6644FF 0%, #8B5CF6 30%, #A78BFA 60%, #C4B5FD 80%, #E9D5FF 90%, #F9FAFB 100%)"></div>
        <div class="relative z-10 max-w-4xl mx-auto pt-8">
            <h1 class="text-3xl md:text-5xl font-bold text-white mb-6">
                Trouvez la formation faite pour vous
            </h1>
        </div>
    </section>

    <div class="max-w-7xl mx-auto px-4 py-8">
        <div class="flex flex-col lg:flex-row gap-8">
            
            <aside id="filter-sidebar" class="lg:w-1/3 space-y-6 mobile-hidden">
                <div class="sticky-top space-y-6">
                    <div class="relative">
                        <i data-lucide="search" class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 h-5 w-5"></i>
                        <input type="text" id="desktop-search" placeholder="Mot clé : Comptable, développeur" class="input pl-12 py-3 text-lg w-full border-gray-300 rounded-md"/>
                    </div>
                    
                    <div class="card p-6 border border-gray-200 rounded-lg">
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex items-center gap-2">
                                <i data-lucide="filter" class="h-5 w-5"></i>
                                <h2 class="text-lg font-semibold">Filtrer</h2>
                            </div>
                            <button id="clear-filters" class="btn btn-ghost text-red-500 hover:text-red-700 hidden text-sm">
                                Effacer
                            </button>
                        </div>
                        <div id="filter-categories" class="space-y-4">
                            </div>
                    </div>
                </div>
            </aside>

            <main class="lg:w-2/3">
                <div class="mb-6 flex justify-between items-center">
                    <p id="results-count" class="text-gray-600">
                        {{ parcours.length }} formation{% if parcours.length > 1 %}s{% endif %}
                    </p>
                </div>
                <div id="formations-grid" class="grid gap-6 grid-cols-1 md:grid-cols-2">
                    {# La grille est vide ici, le JavaScript va la remplir #}
                </div>
                <div id="no-results" class="text-center py-12 hidden">
                    </div>
            </main>
        </div>
    </div>
</main>

<script>
    const allFormations = [
    {% for p in parcours %}
    {
        "id": "{{ p._id }}",
        "titre": {{ p.titre | dump | safe }},
        "slug": { "current": "{{ p.slug.current }}" },
        "imageHero": "{{ p.imageHero | sanityImageUrl }}",
        "category": "{{ p.category.title }}",
        "typeFormation": "{{ p.typeFormation }}",
        "financementsPossibles": {{ p.financementsPossibles | dump | safe or "[]" }},
        "certification": "{{ p.certification.title }}",
        "partenaire": "{{ p.partenaire.title }}",
        "eligibleCPF": {{ p.eligibleCPF or false }},
        "duree": {
            "heures": {{ p.duree.heures or 0 }},
            "mois": {{ p.duree.mois or 0 }}
        }
    },
    {% endfor %}
    ];
</script>
<script src="/assets/js/catalogue-filters.js" defer></script>