---js
{
  pagination: {
    data: "parcours",
    size: 1,
    alias: "p"
  },
  permalink: data => `/parcours/${data.p.slug.current}/`,
  layout: "base.njk",
  eleventyComputed: {
    title: data => data.p.metaTitle || data.p.titre,
    metaDescription: data => data.p.metaDescription,
    openGraphImage: data => data.p.openGraphImage,
    head: `<link rel="stylesheet" href="/assets/css/parcours.css">`
  }
}
---


{# --- Contenu HTML de la page --- #}

<section class="gradient-bg relative overflow-hidden hero-section">
    <div class="max-w-6xl mx-auto px-6 pt-40 sm:pt-40 pb-12 relative z-10">
        <div id="parcours-hero-grid">
            
            <div id="parcours-hero-text" class="text-white">
                <h1 class="text-3xl sm:text-4xl lg:text-5xl xl:text-6xl font-bold mb-6 leading-tight">
                    {{ p.titre }}
                </h1>
                
               {% if p.sousTitrePrincipal %}
<p class="mb-6 text-white/90 font-semibold leading-tight" style="font-size: 1.2rem;">
    <b>{{ p.sousTitrePrincipal }}, </b>
    {% if p.codeRNCP %}
        <em class="rncp-code">{{ p.codeRNCP }}</em>
    {% endif %}
</p>
{% endif %}
                
                {% if p.descriptionHero %}
                <p class="text-base mb-12 text-white/80 leading-relaxed">
                    {{ p.descriptionHero }}
                </p>
                {% endif %}
                
                <div class="flex flex-wrap gap-4 justify-center sm:justify-start mb-12 sm:mb-0">

                    <a href="{{ p.urlFormulaire or '#' }}">
                        <button class="border-white bg-white text-[#6644FF] hover:bg-gray-50 hover:text-[#6644FF] rounded-full px-12 py-3 font-bold text-base transition-all hover:scale-105 shadow-lg">
                            Commencer la formation
                        </button>
                    </a>
                </div>
            </div>
            
            {% if p.imageHero %}
            <div id="parcours-hero-image">
                <div class="w-80 h-96 relative mx-auto lg:mx-0 lg:ml-auto">
                    <img src="{{ p.imageHero | sanityImageUrl }}" 
                         alt="{{ p.imageHero.alt or p.titre }}" 
                         class="w-full h-full object-cover rounded-lg shadow-2xl" />
                </div>
            </div>
            {% endif %}
            
        </div>
    </div>
</section>

{% if p.informationsPratiques and p.informationsPratiques.length > 0 %}
<section class="py-16 px-6 bg-white">
    <div class="container mx-auto max-w-6xl">
        <h2 class="text-3xl font-bold text-center mb-12 text-primary">Informations pratiques</h2>
        <div class="grid md:grid-cols-{{ p.informationsPratiques.length }} gap-4 px-5 sm:px-0">
            {% for info in p.informationsPratiques %}
            <div class="bg-white border-2 border-primary rounded-xl shadow-sm p-4 sm:p-6 text-center flex flex-col" style="background-color: rgba(102, 68, 255, 0.05);">
    <div class="mb-3">
        <span class="inline-block px-2 py-1 text-xs font-medium text-white rounded-full bg-primary">
            {{ info.titre }}
        </span>
    </div>
    
    <div class="flex-grow flex items-center justify-center">
        {% if info.logo %}
            <img src="{{ info.logo | sanityImageUrl }}" alt="{{ info.titre }}" class="w-16 h-auto mt-2" />
        {% else %}
            <p class="text-sm text-gray-600 leading-tight sm:leading-relaxed">{{ info.valeur | nl2br | safe }}</p>
        {% endif %}
    </div>
</div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<section class="py-16 px-6 gradient-bg">
    <div class="container mx-auto max-w-6xl">
        <div class="grid lg:grid-cols-3 gap-8 items-start mb-12">
            
            {% if p.objectifs and p.objectifs.length > 0 %}
            <div class="flex flex-col h-full mb-4 sm:mb-0">
                <h2 class="text-3xl font-bold mb-4 sm:mb-8 text-white text-center underline">Objectifs</h2>
                <div class="space-y-4">
                    {% for item in p.objectifs %}
                    <div class="flex items-start gap-3">
                        <svg class="h-5 w-5 flex-shrink-0 text-white mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                        <span class="text-white/95">{{ item }}</span>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
            
            {% if p.publicVise and p.publicVise.length > 0 %}
            <div class="flex flex-col h-full mb-4 sm:mb-0">
                <h3 class="text-3xl font-bold mb-4 sm:mb-8 text-white text-center underline">Public visé</h3>
                <div class="space-y-4">
                    {% for item in p.publicVise %}
                    <div class="flex items-start gap-3">
                        <svg class="h-5 w-5 flex-shrink-0 text-white mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                        <span class="text-white/95">{{ item }}</span>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
            
            {% if p.prerequis and p.prerequis.length > 0 %}
            <div class="flex flex-col h-full mb-4 sm:mb-0">
                <h3 class="text-3xl font-bold mb-4 sm:mb-8 text-white text-center underline">Prérequis</h3>
                <div class="space-y-4">
                    {% for item in p.prerequis %}
                    <div class="flex items-start gap-3">
                        <svg class="h-5 w-5 flex-shrink-0 text-white mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                        <span class="text-white/95">{{ item }}</span>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>
        <div class="text-center mt-12">
            <a href="{{ p.urlFormulaire or '#' }}">
                <button class="bg-white text-primary hover:bg-gray-50 rounded-full px-12 py-3 font-semibold text-lg transition-all hover:scale-105 shadow-lg">
                    Commencer la formation
                </button>
            </a>
        </div>
    </div>
</section>

{% if p.programme and p.programme.competences.length > 0 %}
<section class="py-16 px-6 bg-gray-50">
    <div class="container mx-auto max-w-5xl">
        <div class="text-center mb-12">
            <h2 class="text-3xl font-bold mb-4 text-primary">Programme détaillé</h2>
            <p class="text-gray-600">Modules et projets pour accompagner votre formation</p>
        </div>
        <div class="space-y-4">
            {% for comp in p.programme.competences %}
            <details class="bg-white rounded-xl shadow-sm border border-primary">
                <summary class="text-base font-semibold text-primary italic">{{ comp.titre }}</summary>
                <div>
                    <ul class="space-y-2 text-gray-700 list-disc list-inside marker:text-primary">
                        {% for element in comp.elements %}
                        <li class="bg-gray-50 p-3 rounded-lg">{{ element }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </details>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

{% if p.blocIntermediaire and p.blocIntermediaire.activer %}
<section class="bg-white py-16 lg:py-24">
    <div class="max-w-6xl mx-auto px-6">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-12 items-center">
            
            <div class="lg:col-span-1">
                {% if p.blocIntermediaire.image %}
                <img src="{{ p.blocIntermediaire.image | sanityImageUrl }}" 
                     alt="{{ p.blocIntermediaire.titre or 'Image descriptive' }}" 
                     class="rounded-xl shadow-lg w-full">
                {% endif %}
            </div>

            <div class="lg:col-span-2">
                {% if p.blocIntermediaire.titre %}
                <h2 class="text-3xl font-bold text-primary mb-4">
                    {{ p.blocIntermediaire.titre }}
                </h2>
                {% endif %}
                
                {% if p.blocIntermediaire.contenu %}
                <p class="text-gray-700 leading-relaxed">
                    {{ p.blocIntermediaire.contenu | nl2br | safe }}
                </p>
                {% endif %}
            </div>

        </div>
    </div>
</section>
{% endif %}


{% if p.offres and p.offres.length > 0 %}
<section class="py-20 px-6 gradient-offers">
    <div class="container mx-auto max-w-6xl">
        <h2 class="text-4xl font-bold text-center mb-16 text-white underline">Nos offres</h2>
        <div class="flex flex-wrap justify-center items-stretch gap-8">
            {% for offre in p.offres %}
            <div class="bg-white rounded-2xl shadow-xl p-8 border-2 border-primary w-full max-w-xs">
                <div class="text-center mb-8">
                    <h3 class="text-2xl font-bold text-black mb-4 italic text-primary">{{ offre.titre }}</h3>
                    <div class="text-4xl font-bold text-primary mb-1">{{ offre.prix }}</div>
                </div>
                <div class="space-y-4">
                    {% for element in offre.elements %}
                    <div class="flex items-center gap-3">
                        <svg class="h-5 w-5 text-primary flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                        <span class="text-gray-700 font-thin">{{ element }}</span>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="text-center mt-20">
            <a href="{{ p.urlFormulaire or '#' }}">
                <button class="gradient-btn text-white rounded-full px-14 py-3 font-semibold text-lg transition-all hover:scale-105 shadow-lg">
                    Commencer la formation
                </button>
            </a>
        </div>
    </div>
</section>
{% endif %}

{% if p.financements and p.financements.length > 0 %}
<section class="py-16 px-6 bg-white">
    <div class="container mx-auto max-w-7xl">
        <h2 class="text-3xl font-bold text-center mb-12 text-primary">Solutions de financement possibles</h2>
        <div class="grid md:grid-cols-{{ p.financements.length }} gap-4 px-5 sm:px-0">
            {% for f in p.financements %}
            <div class="bg-white border-2 border-primary rounded-xl shadow-sm p-4 sm:p-6 text-center" style="background-color: rgba(102, 68, 255, 0.05);">
                <div class="mb-3">
                    <span class="inline-block px-2 py-1 text-xs font-medium text-white rounded-full bg-primary">{{ f.titre }}</span>
                </div>
                <p class="text-sm text-gray-600 leading-tight sm:leading-relaxed">{{ f.description | nl2br | safe }}</p>
            </div>
            {% endfor %}
        </div>
        <div class="text-center mt-16">
           <a href="{{ p.urlFormulaire or '#' }}">
               <button class="gradient-btn text-white rounded-full px-14 py-3 font-semibold text-lg transition-all hover:scale-105 shadow-lg">
                    Trouver ma solution de formation
                </button>
            </a>
        </div>
    </div>
</section>
{% endif %}

<section class="py-16 px-6 bg-gray-50">
    <div class="container mx-auto max-w-5xl">
        <div class="text-center mb-12">
            <h2 class="text-3xl font-bold mb-4 text-primary">Que faire après la formation ?</h2>
            <p class="text-gray-600">Découvrez vos perspectives d'évolution professionnelle</p>
        </div>
        <div class="space-y-4">
    {% for bloc in p.apresFormation %}
    <details class="bg-white rounded-xl shadow-sm border border-primary">
        <summary class="text-lg font-semibold text-primary">{{ bloc.titre | upper }}</summary>
        <div>
            <ul class="space-y-2 text-gray-700 list-disc list-inside marker:text-primary">
                {% for item in bloc.elements %}
                <li class="bg-gray-50 p-3 rounded-lg">{{ item }}</li>
                {% endfor %}
            </ul>
        </div>
    </details>
    {% endfor %}
</div>
    </div>
</section>

{% if p.informationsComplementaires %}
<section class="py-16 px-6 bg-gray-50">
    <div class="container mx-auto max-w-4xl">
        <h2 class="text-3xl font-bold text-center text-primary">Informations complémentaires</h2>        
        {% if p.imageFranceCompetences %}
        <div class="flex justify-center my-0">
            <img src="{{ p.imageFranceCompetences | sanityImageUrl }}" alt="Logo France Compétences" class="h-40" />
        </div>
        {% endif %}
        
        <div class="bg-white rounded-2xl shadow-sm p-8 prose max-w-none">
            {{ p.informationsComplementaires.contenu | portableText | safe }}
        </div>
    </div>
</section>
{% endif %}

{% if p.testimonials and p.testimonials.length > 0 %}
<section class="py-20 px-6 bg-gray-50">
    <div class="container mx-auto max-w-6xl">
        <div class="text-center mb-11">
            <h2 class="text-4xl font-bold text-gray-900 mb-4">Nos apprenants témoignent</h2>
            <p class="text-gray-600 text-lg" style="font-weight: 400;">Retour sur expérience de nos apprenants</p>
        </div>
        
        <div class="text-center mb-12">
            <h3 class="text-2xl font-bold text-gray-900 mb-4">Excellent</h3>
            <div class="flex justify-center mb-4">
                <span class="text-green-500 text-3xl">★★★★★</span>
            </div>
            <p class="text-gray-600" style="font-weight: 400;">
                Une note de <strong>4.6 sur 5</strong> sur la base de <strong>4 074 avis</strong> sur 
                <a href="https://fr.trustpilot.com/review/www.26academy.com" target="_blank" class="text-blue-600 hover:underline">Trustpilot</a>
            </p>
        </div>
        
        <div class="grid lg:grid-cols-3 gap-8">
            {% for testimonial in p.testimonials %}
            <div class="bg-white rounded-lg shadow-lg p-6 border border-gray-200">
                <div class="flex mb-4">
                    <span class="text-green-500 text-xl">★★★★★</span>
                </div>
                <h4 class="font-bold text-gray-900 mb-2">{{ testimonial.nom }}</h4>
                <h5 class="font-semibold text-gray-800 mb-3">{{ testimonial.poste }}</h5>
                <p class="text-gray-700 mb-4">{{ testimonial.avis }}</p>
                <a href="https://fr.trustpilot.com/review/www.26academy.com" target="_blank" class="text-blue-600 hover:underline text-sm">En savoir plus</a>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<section class="py-16 px-6 bg-gradient-to-r from-gray-50 to-gray-100">
    <div class="container mx-auto max-w-6xl">
        <div class="flex flex-col lg:flex-row items-center gap-12">
            <div class="lg:w-1/2">
                <img src="https://cdn.sanity.io/images/29lzrddu/production/8f80b27d8bf66600eaccdde60484aece8a594bfd-919x530.jpg" 
                     alt="Certification Qualiopi" 
                     class="w-full max-w-lg mx-auto lg:mx-0 rounded-lg shadow-lg" />
            </div>
            <div class="lg:w-1/2">
                <p class="text-gray-700 leading-[1.4] text-base font-extralight">
                    <span style="font-weight: 700;">26 ACADEMY</span> a obtenu le 25/11/2020 la certification "Qualiopi", 
                    certification des organismes prestataires d'actions contribuant au 
                    développement des compétences, mentionnée à l'article L. 6351-1 
                    du Code du travail.
                </p>
                <br>
                <p class="text-gray-700 leading-[1.4] text-base font-extralight">
                    La certification qualité a été délivrée pour les catégories d'actions 
                    suivantes : Actions de formation, Bilans de compétences.
                </p>
                <br>
                <p class="text-gray-700 leading-[1.4] text-base font-extralight">
                    Organisme validé au Datadock et conforme aux critères qualité OPCO.
                </p>
            </div>
        </div>
    </div>
</section>